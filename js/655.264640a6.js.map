{"version":3,"file":"js/655.264640a6.js","mappings":"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","sources":["webpack://commercecorevue/./src/components/MyOrders.vue","webpack://commercecorevue/./src/components/MyOrders.vue?c18c"],"sourcesContent":["<template>\r\n  <BaseTemplate>\r\n    <section class=\"orders-section\">\r\n      <h2>我的订单</h2>\r\n      <div v-if=\"orders.length === 0\" class=\"no-orders\">\r\n        <p>您还没有订单。</p>\r\n      </div>\r\n      <div\r\n        v-for=\"order in orders\"\r\n        :key=\"order.number\"\r\n        class=\"order-card glass-card\"\r\n      >\r\n        <div class=\"order-header\">\r\n          <p><strong>订单号：</strong>{{ order.number }}</p>\r\n          <p><strong>订单时间：</strong>{{ formatDate(order.order_date) }}</p>\r\n          <p><strong>总金额：</strong>{{ order.total_amount }} 元</p>\r\n          <p>\r\n            <strong>订单状态：</strong>{{ getStatusText(order.order_status) }}\r\n          </p>\r\n        </div>\r\n        <div class=\"order-details\">\r\n          <h4>订单详情：</h4>\r\n          <div\r\n            v-for=\"detail in order.order_details\"\r\n            :key=\"detail.id\"\r\n            class=\"order-detail-item\"\r\n          >\r\n            <img\r\n              :src=\"getProductImageUrl(detail.product_image)\"\r\n              alt=\"商品图片\"\r\n              class=\"product-image\"\r\n            />\r\n            <p><strong>商品名称：</strong>{{ detail.product_name }}</p>\r\n            <p><strong>数量：</strong>{{ detail.quantity }}</p>\r\n            <p><strong>单价：</strong>{{ detail.unit_price }} 元</p>\r\n            <p><strong>折扣：</strong>{{ detail.discount }} 元</p>\r\n            <p><strong>税额：</strong>{{ detail.tax }} 元</p>\r\n            <p>\r\n              <strong>总价：</strong>\r\n              {{\r\n                (\r\n                  Number(detail.unit_price) * Number(detail.quantity) -\r\n                  Number(detail.discount) +\r\n                  Number(detail.tax)\r\n                ).toFixed(2)\r\n              }}\r\n              元\r\n            </p>\r\n            <button\r\n              v-if=\"order.order_status === 'paied'\"\r\n              class=\"btn btn-primary\"\r\n              @click=\"goToReview(detail.product_id)\"\r\n            >\r\n              评价\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </BaseTemplate>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      orders: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchOrders();\r\n  },\r\n  methods: {\r\n    fetchOrders() {\r\n      axios\r\n        .get(\"http://localhost:8000/api/orders/\")\r\n        .then((response) => {\r\n          console.log(response.data); // 打印API返回的数据\r\n          this.orders = response.data;\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Failed to fetch orders:\", error);\r\n        });\r\n    },\r\n    formatDate(date) {\r\n      return new Date(date).toLocaleString();\r\n    },\r\n    getStatusText(status) {\r\n      switch (status) {\r\n        case \"awaiting_payment\":\r\n          return \"等待支付\";\r\n        case \"paied\":\r\n          return \"已支付\";\r\n        case \"shipped\":\r\n          return \"已发货\";\r\n        case \"delivered\":\r\n          return \"已送达\";\r\n        case \"cancelled\":\r\n          return \"已取消\";\r\n        default:\r\n          return \"未知状态\";\r\n      }\r\n    },\r\n    getProductImageUrl(imagePath) {\r\n      return `http://localhost:8000${imagePath}`;\r\n    },\r\n    goToReview(productId) {\r\n      if (productId) {\r\n        this.$router.push({\r\n          name: \"ReviewPage\",\r\n          params: { productId }, // 确保传递正确的参数\r\n        });\r\n      } else {\r\n        console.error(\"Product ID is missing.\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.orders-section {\r\n  padding: 2rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.no-orders {\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  color: #555;\r\n}\r\n\r\n.order-card {\r\n  padding: 1.5rem;\r\n  border-radius: 10px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.order-header {\r\n  margin-bottom: 1rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.order-details {\r\n  padding-top: 1rem;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.order-detail-item {\r\n  margin-bottom: 1rem;\r\n  padding: 0.5rem;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.product-image {\r\n  width: 80px;\r\n  height: 80px;\r\n  object-fit: cover;\r\n}\r\n\r\n.order-detail-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.btn {\r\n  margin-left: auto;\r\n}\r\n</style>\r\n","import { render } from \"./MyOrders.vue?vue&type=template&id=35dcb7b6&scoped=true\"\nimport script from \"./MyOrders.vue?vue&type=script&lang=js\"\nexport * from \"./MyOrders.vue?vue&type=script&lang=js\"\n\nimport \"./MyOrders.vue?vue&type=style&index=0&id=35dcb7b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35dcb7b6\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","key","_hoisted_4","_createBlock","_component_BaseTemplate","default","_withCtx","_hoisted_1","_hoisted_2","$data","orders","length","_createElementBlock","_hoisted_3","_hoisted_5","_createCommentVNode","_Fragment","_renderList","order","number","_hoisted_6","_hoisted_7","_createTextVNode","_toDisplayString","_hoisted_8","$options","formatDate","order_date","_hoisted_9","total_amount","_hoisted_10","getStatusText","order_status","_hoisted_11","_hoisted_12","order_details","detail","id","src","getProductImageUrl","product_image","alt","_hoisted_13","_hoisted_14","product_name","_hoisted_15","quantity","_hoisted_16","unit_price","_hoisted_17","discount","_hoisted_18","tax","_hoisted_19","Number","toFixed","onClick","$event","goToReview","product_id","_hoisted_20","_","data","mounted","this","fetchOrders","methods","axios","get","then","response","console","log","catch","error","date","Date","toLocaleString","status","imagePath","productId","$router","push","name","params","__exports__","render"],"sourceRoot":""}