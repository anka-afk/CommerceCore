"use strict";(self["webpackChunkcommercecorevue"]=self["webpackChunkcommercecorevue"]||[]).push([[655],{3036:function(e,r,t){t.r(r),t.d(r,{default:function(){return D}});var l=t(6768),n=t(4232);const u=e=>((0,l.Qi)("data-v-35dcb7b6"),e=e(),(0,l.jt)(),e),s={class:"orders-section"},o=u((()=>(0,l.Lk)("h2",null,"我的订单",-1))),a={key:0,class:"no-orders"},d=u((()=>(0,l.Lk)("p",null,"您还没有订单。",-1))),c=[d],i={class:"order-header"},k=u((()=>(0,l.Lk)("strong",null,"订单号：",-1))),p=u((()=>(0,l.Lk)("strong",null,"订单时间：",-1))),g=u((()=>(0,l.Lk)("strong",null,"总金额：",-1))),m=u((()=>(0,l.Lk)("strong",null,"订单状态：",-1))),L={class:"order-details"},v=u((()=>(0,l.Lk)("h4",null,"订单详情：",-1))),_=["src"],h=u((()=>(0,l.Lk)("strong",null,"商品名称：",-1))),b=u((()=>(0,l.Lk)("strong",null,"数量：",-1))),f=u((()=>(0,l.Lk)("strong",null,"单价：",-1))),W=u((()=>(0,l.Lk)("strong",null,"折扣：",-1))),C=u((()=>(0,l.Lk)("strong",null,"税额：",-1))),w=u((()=>(0,l.Lk)("strong",null,"总价：",-1))),y=["onClick"];function I(e,r,t,u,d,I){const X=(0,l.g2)("BaseTemplate");return(0,l.uX)(),(0,l.Wv)(X,null,{default:(0,l.k6)((()=>[(0,l.Lk)("section",s,[o,0===d.orders.length?((0,l.uX)(),(0,l.CE)("div",a,c)):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.orders,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.number,class:"order-card glass-card"},[(0,l.Lk)("div",i,[(0,l.Lk)("p",null,[k,(0,l.eW)((0,n.v_)(e.number),1)]),(0,l.Lk)("p",null,[p,(0,l.eW)((0,n.v_)(I.formatDate(e.order_date)),1)]),(0,l.Lk)("p",null,[g,(0,l.eW)((0,n.v_)(e.total_amount)+" 元",1)]),(0,l.Lk)("p",null,[m,(0,l.eW)((0,n.v_)(I.getStatusText(e.order_status)),1)])]),(0,l.Lk)("div",L,[v,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.order_details,(r=>((0,l.uX)(),(0,l.CE)("div",{key:r.id,class:"order-detail-item"},[(0,l.Lk)("img",{src:I.getProductImageUrl(r.product_image),alt:"商品图片",class:"product-image"},null,8,_),(0,l.Lk)("p",null,[h,(0,l.eW)((0,n.v_)(r.product_name),1)]),(0,l.Lk)("p",null,[b,(0,l.eW)((0,n.v_)(r.quantity),1)]),(0,l.Lk)("p",null,[f,(0,l.eW)((0,n.v_)(r.unit_price)+" 元",1)]),(0,l.Lk)("p",null,[W,(0,l.eW)((0,n.v_)(r.discount)+" 元",1)]),(0,l.Lk)("p",null,[C,(0,l.eW)((0,n.v_)(r.tax)+" 元",1)]),(0,l.Lk)("p",null,[w,(0,l.eW)(" "+(0,n.v_)((Number(r.unit_price)*Number(r.quantity)-Number(r.discount)+Number(r.tax)).toFixed(2))+" 元 ",1)]),"paied"===e.order_status?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-primary",onClick:e=>I.goToReview(r.product_id)}," 评价 ",8,y)):(0,l.Q3)("",!0)])))),128))])])))),128))])])),_:1})}t(4114);var X=t(5421),E={data(){return{orders:[]}},mounted(){this.fetchOrders()},methods:{fetchOrders(){X.A.get("http://localhost:8000/api/orders/").then((e=>{console.log(e.data),this.orders=e.data})).catch((e=>{console.error("Failed to fetch orders:",e)}))},formatDate(e){return new Date(e).toLocaleString()},getStatusText(e){switch(e){case"awaiting_payment":return"等待支付";case"paied":return"已支付";case"shipped":return"已发货";case"delivered":return"已送达";case"cancelled":return"已取消";default:return"未知状态"}},getProductImageUrl(e){return`http://localhost:8000${e}`},goToReview(e){e?this.$router.push({name:"ReviewPage",params:{productId:e}}):console.error("Product ID is missing.")}}},x=t(1241);const T=(0,x.A)(E,[["render",I],["__scopeId","data-v-35dcb7b6"]]);var D=T}}]);
//# sourceMappingURL=655.264640a6.js.map